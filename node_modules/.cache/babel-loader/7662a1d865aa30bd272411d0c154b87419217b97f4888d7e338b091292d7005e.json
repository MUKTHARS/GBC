{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useLocation,useNavigate}from'react-router-dom';import{decryptUrl}from'../../utils/encryption';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SecureRedirect=()=>{const[error,setError]=useState(null);const[loading,setLoading]=useState(true);const location=useLocation();const navigate=useNavigate();useEffect(()=>{const handleRedirect=async()=>{try{const urlParams=new URLSearchParams(location.search);const token=urlParams.get('token');if(!token){throw new Error('No redirect token provided');}// Decrypt the target URL/path\nconst decryptedTarget=decryptUrl(token);if(!decryptedTarget){throw new Error('Invalid redirect token');}setLoading(false);// If it's an internal path, navigate to it\nif(decryptedTarget.startsWith('/')){navigate(decryptedTarget,{replace:true});}else{// If it's an external URL, redirect to it\nwindow.location.href=decryptedTarget;}}catch(err){console.error('Secure redirect error:',err);setError(err.message);setLoading(false);// Fallback to home page after delay\nsetTimeout(()=>{navigate('/',{replace:true});},3000);}};handleRedirect();},[location,navigate]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{textAlign:'center',padding:'2rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1.2rem',marginBottom:'1rem'},children:\"Securing your connection...\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#666'},children:\"Redirecting you safely to your destination\"})]});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{textAlign:'center',padding:'2rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1.2rem',marginBottom:'1rem',color:'#d9534f'},children:\"Security Redirect Error\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'1rem'},children:error}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#666'},children:\"Redirecting to home page...\"})]});}return null;};export default SecureRedirect;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","decryptUrl","jsx","_jsx","jsxs","_jsxs","SecureRedirect","error","setError","loading","setLoading","location","navigate","handleRedirect","urlParams","URLSearchParams","search","token","get","Error","decryptedTarget","startsWith","replace","window","href","err","console","message","setTimeout","className","style","textAlign","padding","children","fontSize","marginBottom","color"],"sources":["C:/GBC/src/components/Security/SecureRedirect.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { decryptUrl } from '../../utils/encryption';\r\n\r\nconst SecureRedirect = () => {\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const handleRedirect = async () => {\r\n      try {\r\n        const urlParams = new URLSearchParams(location.search);\r\n        const token = urlParams.get('token');\r\n        \r\n        if (!token) {\r\n          throw new Error('No redirect token provided');\r\n        }\r\n\r\n        // Decrypt the target URL/path\r\n        const decryptedTarget = decryptUrl(token);\r\n        \r\n        if (!decryptedTarget) {\r\n          throw new Error('Invalid redirect token');\r\n        }\r\n\r\n        setLoading(false);\r\n\r\n        // If it's an internal path, navigate to it\r\n        if (decryptedTarget.startsWith('/')) {\r\n          navigate(decryptedTarget, { replace: true });\r\n        } else {\r\n          // If it's an external URL, redirect to it\r\n          window.location.href = decryptedTarget;\r\n        }\r\n        \r\n      } catch (err) {\r\n        console.error('Secure redirect error:', err);\r\n        setError(err.message);\r\n        setLoading(false);\r\n        \r\n        // Fallback to home page after delay\r\n        setTimeout(() => {\r\n          navigate('/', { replace: true });\r\n        }, 3000);\r\n      }\r\n    };\r\n\r\n    handleRedirect();\r\n  }, [location, navigate]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container\" style={{ textAlign: 'center', padding: '2rem' }}>\r\n        <div style={{ fontSize: '1.2rem', marginBottom: '1rem' }}>\r\n          Securing your connection...\r\n        </div>\r\n        <div style={{ color: '#666' }}>\r\n          Redirecting you safely to your destination\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"container\" style={{ textAlign: 'center', padding: '2rem' }}>\r\n        <div style={{ fontSize: '1.2rem', marginBottom: '1rem', color: '#d9534f' }}>\r\n          Security Redirect Error\r\n        </div>\r\n        <div style={{ marginBottom: '1rem' }}>{error}</div>\r\n        <div style={{ color: '#666' }}>\r\n          Redirecting to home page...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport default SecureRedirect;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}